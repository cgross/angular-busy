angular.module("cgBusy",[]),angular.module("cgBusy").factory("_cgBusyTrackerFactory",["$timeout","$q",function(a,b){return function(){var c={};c.promises=[],c.delayPromise=null,c.durationPromise=null,c.delayJustFinished=!1,c.reset=function(b){c.minDuration=b.minDuration,c.promises=[],angular.forEach(b.promises,function(a){a&&!a.$cgBusyFulfilled&&d(a)}),0!==c.promises.length&&(c.delayJustFinished=!1,b.delay&&(c.delayPromise=a(function(){c.delayPromise=null,c.delayJustFinished=!0},parseInt(b.delay,10))),b.minDuration&&(c.durationPromise=a(function(){c.durationPromise=null},parseInt(b.minDuration,10)+(b.delay?parseInt(b.delay,10):0))))},c.isPromise=function(a){var b=a&&(a.then||a.$then||a.$promise&&a.$promise.then);return"undefined"!=typeof b},c.callThen=function(a,c,d){var e;a.then||a.$then?e=a:a.$promise?e=a.$promise:a.denodeify&&(e=b.when(a));var f=e.then||e.$then;f.call(e,c,d)};var d=function(a){if(!c.isPromise(a))throw new Error("cgBusy expects a promise (or something that has a .promise or .$promise");-1===c.promises.indexOf(a)&&(c.promises.push(a),c.callThen(a,function(){a.$cgBusyFulfilled=!0,-1!==c.promises.indexOf(a)&&c.promises.splice(c.promises.indexOf(a),1)},function(){a.$cgBusyFulfilled=!0,-1!==c.promises.indexOf(a)&&c.promises.splice(c.promises.indexOf(a),1)}))};return c.active=function(){return c.delayPromise?!1:c.delayJustFinished?(c.delayJustFinished=!1,0===c.promises.length&&(c.durationPromise=null),c.promises.length>0):c.durationPromise?!0:c.promises.length>0},c}}]),angular.module("cgBusy").value("cgBusyDefaults",{}),angular.module("cgBusy").directive("cgBusy",["$compile","$document","$templateCache","cgBusyDefaults","$http","_cgBusyTrackerFactory",function(a,b,c,d,e,f){var g=["TBODY","THEAD","TFOOT","TR"],h=angular.element(b[0].body);return{restrict:"A",link:function(b,i,j,k){var l=-1!==g.indexOf(i[0].nodeName);if(l)b.$on("$destroy",function(){n&&n.remove(),o&&o.remove()});else{var m=i.css("position");("static"===m||""===m||"undefined"==typeof m)&&i.css("position","relative")}var n,o,p,q,r,s=f(),t=l?h:i,u={top:0,left:0,right:0,bottom:0},v={templateUrl:"angular-busy.html",delay:0,minDuration:0,backdrop:!0,message:"Please Wait...",wrapperClass:"cg-busy cg-busy-animation"};angular.extend(v,d),b.$watchCollection(j.cgBusy,function(d){if(d||(d={promise:null}),angular.isString(d))throw new Error("Invalid value for cg-busy. cgBusy no longer accepts string ids to represent promises/trackers.");(angular.isArray(d)||s.isPromise(d))&&(d={promise:d}),d=angular.extend(angular.copy(v),d),d.templateUrl||(d.templateUrl=v.templateUrl),angular.isArray(d.promise)||(d.promise=[d.promise]),q||(q=b.$new()),q.$message=d.message,angular.equals(s.promises,d.promise)||s.reset({promises:d.promise,delay:d.delay,minDuration:d.minDuration}),q.$cgBusyIsActive=function(){return s.active()},n&&p===d.templateUrl&&r===d.backdrop||(n&&n.remove(),o&&o.remove(),p=d.templateUrl,r=d.backdrop,e.get(p,{cache:c}).then(function(b){if(d.backdrop="undefined"==typeof d.backdrop?!0:d.backdrop,d.backdrop){var c='<div class="cg-busy cg-busy-backdrop cg-busy-backdrop-animation ng-hide" ng-show="$cgBusyIsActive()"></div>';o=a(c)(q),t.append(o)}var e='<div class="'+d.wrapperClass+' ng-hide" ng-show="$cgBusyIsActive()">'+b.data+"</div>";if(n=a(e)(q),l){var f=i[0].getClientRects()[0];u={top:f.top+"px",left:f.left+"px",height:f.bottom-f.top+"px",width:f.right-f.left+"px"}}angular.element(n.children()[0]).css("position","absolute").css(u),t.append(n)},function(a){throw new Error("Template specified for cgBusy ("+d.templateUrl+") could not be loaded. "+a)}))},!0)}}}]),angular.module("cgBusy").run(["$templateCache",function(a){"use strict";a.put("angular-busy.html",'<div class="cg-busy-default-wrapper">\n   <div class="cg-busy-default-sign">\n      <div class="cg-busy-default-spinner">\n         <div class="bar1"></div>\n         <div class="bar2"></div>\n         <div class="bar3"></div>\n         <div class="bar4"></div>\n         <div class="bar5"></div>\n         <div class="bar6"></div>\n         <div class="bar7"></div>\n         <div class="bar8"></div>\n         <div class="bar9"></div>\n         <div class="bar10"></div>\n         <div class="bar11"></div>\n         <div class="bar12"></div>\n      </div>\n      <div class="cg-busy-default-text">{{$message}}</div>\n   </div>\n</div>')}]);